<!-- Exercise 16-3: A Monster : DONE!!!
  
  It is traditional for platform games to have enemies that you can jump on top 
  of to defeat. This exercise asks you to add such an actor type to the game.

  We’ll call it a monster. Monsters move only horizontally. You can make them 
  move in the direction of the player, bounce back and forth like horizontal 
  lava, or have any movement pattern you want. The class doesn’t have to handle 
  falling, but it should make sure the monster doesn’t walk through walls.

  When a monster touches the player, the effect depends on whether the player is 
  jumping on top of them or not. You can approximate this by checking whether 
  the player’s bottom is near the monster’s top. If this is the case, the 
  monster disappears. If not, the game is lost.
-->

<!doctype html>
    <head>
        <meta charset='utf-8'>
        <title>Exercise 3</title>
        <link rel="stylesheet" href="css/game.css">
    </head>
    <body>
        <style>.monster { background: purple }</style>
        <script src='levels.js'></script>
        <script src='game.js'></script>
        <script>
          // The below code is already included in game.js, I've placed this
          // class here to allow for quick referencing.

          // class Monster {
          //   constructor(pos, speed) {
          //     this.pos = pos;
          //     this.speed = speed;
          //   }

          //   get type() { return "monster"; }

          //   static create(pos) {
          //     return new Monster(pos, new Vec(5, 0));
          //   }

          //   update(time, state) {
          //     let newPos = this.pos.plus(this.speed.times(time));
          //     if (!state.level.touches(newPos, this.size, "wall")) {
          //       return new Monster(newPos, this.speed);
          //     } else {
          //       return new Monster(this.pos, this.speed.times(-1));
          //     }
          //   }

          //   collide(state) {
          //     let playerPos = state.player.pos;
          //     let monsterPos = this.pos;
          //     let playerVec = new Vec(Math.ceil(playerPos.x), Math.ceil(playerPos.y));
          //     let monsterVec = new Vec(Math.ceil(monsterPos.x), Math.ceil(monsterPos.y));

          //     if (playerVec.y <= monsterVec.y) {
          //       let filtered = state.actors.filter(a => a != this);
          //       return new State(state.level, filtered, "playing");
          //     } else {
          //       return new State(state.level, state.actors, "lost");
          //     }
          //   }
          // }
          // Monster.prototype.size = new Vec(1.2, 2);
          runLevel(new Level(`
..................................
.################################.
.#..............................#.
.#..............................#.
.#..............................#.
.#...........................o..#.
.#..@...........................#.
.##########..............########.
..........#..o..o..o..M..#........
..........#..............#........
..........################........
..................................
`), DOMDisplay);
        </script>
    </body>
</html>