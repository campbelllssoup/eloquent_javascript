<!-- Exercise 17-3: A Boucing Ball : DONE!!!

  Use the requestAnimationFrame technique that we saw in Chapter 14 and Chapter 
  16 to draw a box with a bouncing ball in it. The ball moves at a constant 
  speed and bounces off the boxâ€™s sides when it hits them.
-->

<!doctype html>
    <head>
        <meta charset='utf-8'>
        <title>Exercise 3</title>
    </head>
    <body>  
        <canvas width="400" height="400"></canvas>
        <script>
          let canvas = document.querySelector('canvas');
          let cx = canvas.getContext("2d");
        
          let lastTime = null;
          function frame(time) {
            if (lastTime != null) {
              updateAnimation(Math.min(100, time - lastTime) / 1000);
            }
            lastTime = time;
            requestAnimationFrame(frame);
          }
          requestAnimationFrame(frame);
        
          // generates a random number between 1 and 10.
          function randNum() {
            return Math.ceil((Math.random() * 100) / 10);
          }

          let boxLen = 400;
          let ballX = boxLen / 10;
          let ballY = boxLen / 3;
          let directionX = 2;
          let directionY = 2;
          cx.fillStyle = 'green';
          
          function updateAnimation(step) {
            cx.clearRect(0, 0, canvas.width, canvas.height);
            cx.beginPath();
            ballX += directionX;
            ballY += directionY;
            cx.strokeRect(0, 0, boxLen, boxLen);
            cx.arc(ballX, ballY, 20, 0, 6.3);
            cx.stroke();
            if (ballX > 390 || ballX <= 10) {
              directionX = -1 * directionX;
            }
            if (ballY > 390 || ballY <= 10) {
              directionY = -1 * directionY;
            }
          }
        </script>
    </body>
</html>